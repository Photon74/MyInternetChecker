<Window x:Name="Form" x:Class="MyInternetChecker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" mc:Ignorable="d"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MyInternetChecker"
        Title="MainWindow" 
        Width="20" Height="20"
        WindowStyle="None" 
        ShowInTaskbar="False" 
        ResizeMode="NoResize"
        Background="White" 
        Topmost="True"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        MouseLeftButtonUp="Window_MouseLeftButtonUp">
    <!-- Ресурсы для анимаций -->
    <Window.Resources>
        <!-- Анимация для онлайн состояния: плавная пульсация зеленого -->
        <Storyboard x:Key="OnlineAnimation" RepeatBehavior="Forever">
            <ColorAnimation Storyboard.TargetProperty="(Rectangle.Fill).(SolidColorBrush.Color)"
                            From="#FF006400" To="#FF32CD32" Duration="0:0:2"
                            AutoReverse="True"
                            EasingFunction="{x:Null}"/>
        </Storyboard>

        <!-- Анимация для оффлайн состояния: активная пульсация красного -->
        <Storyboard x:Key="OfflineAnimation" RepeatBehavior="Forever">
            <ColorAnimation Storyboard.TargetProperty="(Rectangle.Fill).(SolidColorBrush.Color)"
                            From="#FF8B0000" To="#FFFF4500" Duration="0:0:0.5"
                            AutoReverse="True"
                            EasingFunction="{x:Null}"/>
        </Storyboard>
    </Window.Resources>
    <Grid Background="Black" >
        <Rectangle x:Name="Rect" 
                   HorizontalAlignment="Center" 
                   Height="20" 
                   Stroke="Black" 
                   VerticalAlignment="Center" 
                   Width="20" 
                   Fill="White"
                   MouseEnter="Rect_MouseEnter"
                   MouseLeave="Rect_MouseLeave"
                   ToolTipService.ShowDuration="60000"
                   ToolTipService.InitialShowDelay="0"
                   ToolTipService.BetweenShowDelay="0">
            <Rectangle.ContextMenu>
                <ContextMenu x:Name="RectContextMenu" Opened="RectContextMenu_Opened">
                    <MenuItem Header="Настройки хостов" Click="SettingsMenuItem_Click"/>
                    <MenuItem Header="Автозапуск с Windows" 
                        Click="AutoStartMenuItem_Click"
                        IsCheckable="True"
                        x:Name="AutoStartMenuItem"/>
                    <Separator/>
                    <MenuItem Header="Выход" Click="ExitMenuItem_Click"/>
                </ContextMenu>
            </Rectangle.ContextMenu>
            <Rectangle.ToolTip>
                <ToolTip x:Name="StatusToolTip" 
                         Placement="Top" 
                         StaysOpen="True"
                         IsOpen="False"
                         Background="WhiteSmoke"
                         Foreground="Black"
                         HasDropShadow="True">
                    <TextBlock x:Name="ToolTipText" Text="Проверка состояния..." />
                </ToolTip>
            </Rectangle.ToolTip>
        </Rectangle>
    </Grid>
</Window>